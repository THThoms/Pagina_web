<title>ASTEROIDS NEO</title>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        user-select: none;
    }

    body {
        background: #030514;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: 'Courier New', monospace;
    }

    .game-wrapper {
        background: #0a1420;
        padding: 20px;
        border: 3px solid #3a8fc2;
        border-radius: 25px;
        box-shadow: 0 0 60px #2a6fa0;
    }

    canvas {
        display: block;
        margin: 0 auto;
        background: radial-gradient(circle at 30% 40%, #142b3c, #020814);
        border: 2px solid #4aafe0;
        border-radius: 12px;
        cursor: none;
    }

    .hud-panel {
        display: flex;
        justify-content: space-between;
        margin-top: 15px;
        padding: 12px 25px;
        background: #0e1f2e;
        border: 1px solid #3f9ed6;
        border-radius: 40px;
        color: #b0e0ff;
    }

    .hud-section {
        display: flex;
        gap: 40px;
    }

    .hud-item {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .hud-label {
        font-size: 12px;
        color: #79b9ee;
    }

    .hud-value {
        font-size: 28px;
        font-weight: bold;
        color: #d0f0ff;
        text-shadow: 0 0 12px #3aa0ff;
    }

    .mission-box {
        background: #0f2335;
        border-left: 5px solid #f0b85a;
        padding: 12px 20px;
        margin: 12px 0;
        color: #ffdba5;
        font-weight: bold;
        display: flex;
        justify-content: space-between;
        border-radius: 12px;
    }

    .boss-indicator {
        color: #ff7b7b;
        text-shadow: 0 0 20px #ff4444;
        font-size: 22px;
        animation: bossThrob 0.8s infinite;
    }

    @keyframes bossThrob {

        0%,
        100% {
            opacity: 1;
            text-shadow: 0 0 20px #ff4444;
        }

        50% {
            opacity: 0.7;
            text-shadow: 0 0 40px #ff0000;
        }
    }

    .instructions {
        margin-top: 10px;
        color: #9ac7e7;
        font-size: 13px;
        display: flex;
        gap: 30px;
        justify-content: center;
    }

    .modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #102433;
        border: 4px solid #f0b85a;
        padding: 40px 70px;
        color: white;
        font-size: 40px;
        font-weight: bold;
        border-radius: 30px;
        display: none;
        flex-direction: column;
        align-items: center;
        gap: 20px;
        z-index: 200;
        box-shadow: 0 0 100px #ffaa33;
        text-align: center;
    }

    .modal button {
        background: #3f8ec0;
        border: none;
        color: white;
        font-size: 24px;
        padding: 15px 40px;
        border-radius: 50px;
        cursor: pointer;
        font-family: inherit;
        font-weight: bold;
        border: 2px solid #a0d0ff;
    }

    .modal button:hover {
        background: #5faae0;
    }

    .powerup-badge {
        color: #ffd966;
        font-weight: bold;
        animation: softGlow 1.2s infinite;
    }

    @keyframes softGlow {

        0%,
        100% {
            text-shadow: 0 0 5px #ffaa00;
        }

        50% {
            text-shadow: 0 0 20px #ffdd44;
        }
    }

    .test-mode {
        background: #2a5580;
        color: #ffd966;
        padding: 6px 18px;
        border-radius: 30px;
        font-size: 14px;
        display: inline-block;
        margin-bottom: 8px;
        border: 1px solid #f0b85a;
    }

    /* PILOT DOSSIER SECTION */
    .pilot-dossier {
        width: 1100px;
        margin-bottom: 30px;
        background: rgba(15, 35, 53, 0.8);
        border: 2px solid #3a8fc2;
        border-radius: 20px;
        padding: 30px;
        display: flex;
        gap: 40px;
        box-shadow: 0 0 30px rgba(42, 111, 160, 0.3);
        backdrop-filter: blur(10px);
        animation: panelFadeIn 1s ease-out;
    }

    @keyframes panelFadeIn {
        from {
            opacity: 0;
            transform: translateY(-20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .dossier-image {
        width: 180px;
        height: 180px;
        border: 2px solid #4aafe0;
        border-radius: 15px;
        overflow: hidden;
        flex-shrink: 0;
        box-shadow: 0 0 20px rgba(74, 175, 224, 0.4);
    }

    .dossier-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        filter: hue-rotate(180deg) brightness(0.8) contrast(1.2);
    }

    .dossier-info {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    .dossier-header {
        border-bottom: 1px solid rgba(74, 175, 224, 0.3);
        padding-bottom: 10px;
        margin-bottom: 5px;
    }

    .pilot-id {
        font-size: 10px;
        color: #f0b85a;
        letter-spacing: 4px;
        display: block;
        margin-bottom: 4px;
    }

    .pilot-name {
        font-size: 32px;
        color: #4aafe0;
        text-transform: uppercase;
        letter-spacing: 2px;
        text-shadow: 0 0 10px rgba(74, 175, 224, 0.5);
    }

    .pilot-role {
        font-size: 14px;
        color: #ff7b7b;
        font-style: italic;
    }

    .pilot-bio {
        font-size: 14px;
        line-height: 1.6;
        color: #b0e0ff;
        margin: 10px 0;
    }

    .skill-matrix {
        display: flex;
        gap: 15px;
    }

    .skill-node {
        border: 1px solid rgba(240, 184, 90, 0.5);
        padding: 4px 12px;
        border-radius: 4px;
        font-size: 11px;
        color: #f0b85a;
        background: rgba(240, 184, 90, 0.1);
    }

    .comms-channels {
        display: flex;
        gap: 20px;
        margin-top: auto;
    }

    .channel {
        font-size: 12px;
        color: #4aafe0;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 6px;
        transition: all 0.3s;
    }

    .channel:hover {
        color: #ffffff;
        text-shadow: 0 0 10px #4aafe0;
        transform: scale(1.05);
    }

    .channel::before {
        content: 'üì°';
        font-size: 14px;
    }

    body {
        flex-direction: column;
        padding: 50px 0;
    }
</style>
</head>

<body>

    <!-- DOSSIER DE PILOTO: SECCI√ìN SOBRE M√ç -->
    <div class="pilot-dossier">
        <div class="dossier-image">
            <img src="https://images.unsplash.com/photo-1539593395743-7da5ee10ff07?auto=format&fit=crop&q=80&w=400"
                alt="Retrato del Piloto">
        </div>
        <div class="dossier-info">
            <div class="dossier-header">
                <span class="pilot-id">S.T.A.R. ID: 8829-NEO</span>
                <a href="../index.html" class="nav-home">‚Üê VOLVER A BASE</a>
                <h1 class="pilot-name">[TU NOMBRE / CALLSIGN]</h1>
                <span class="pilot-role">Especialista en Operaciones T√°cticas</span>
            </div>
            <p class="pilot-bio">
                [Aqu√≠ puedes escribir tu historia o perfil. Por ejemplo: Desarrollador apasionado por crear
                experiencias inmersivas y sistemas eficientes. Actualmente patrullando el Sector Alfa en busca de nuevos
                retos.]
            </p>
            <div class="skill-matrix">
                <div class="skill-node">JS_CORE_MOD</div>
                <div class="skill-node">UIUX_HUD_V2</div>
                <div class="skill-node">SYS_ARCH</div>
            </div>
            <div class="comms-channels">
                <a href="#" class="channel">LINKEDIN_NET</a>
                <a href="#" class="channel">GITHUB_REPO</a>
                <a href="#" class="channel">EMAIL_COMMS</a>
            </div>
        </div>
    </div>

    <div class="game-wrapper">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <div class="test-mode"> BOLITAS DESDE LA PUNTA ¬∑ DISPARO PRECISO </div>
            <div style="color: #ffaa66;"> CADA 2 SEGUNDOS: 1 POWER-UP </div>
        </div>
        <canvas id="gameCanvas" width="1100" height="650"></canvas>

        <div class="hud-panel">
            <div class="hud-section">
                <div class="hud-item">
                    <span class="hud-label">NIVEL</span>
                    <span class="hud-value" id="levelDisplay">5</span>
                </div>
                <div class="hud-item">
                    <span class="hud-label">PUNTOS</span>
                    <span class="hud-value" id="scoreDisplay">005000</span>
                </div>
            </div>
            <div class="hud-section">
                <div class="hud-item">
                    <span class="hud-label">VIDAS</span>
                    <span class="hud-value" id="livesDisplay">5</span>
                </div>
                <div class="hud-item">
                    <span class="hud-label">POWER</span>
                    <span class="hud-value" id="powerupDisplay">‚Äî</span>
                </div>
            </div>
        </div>

        <div class="mission-box" id="missionDisplay">
            <span>üöÄ SECTOR: <span id="levelDisplay2" class="boss-indicator">ALFA-1</span></span>
            <span id="asteroidCountDisplay">‚òÑÔ∏è OBJETIVOS: 0</span>
        </div>

        <div class="instructions">
            <span>[‚Üê‚Üí‚Üë‚Üì]</span> MOVER ¬∑ <span>[ESPACIO]</span> DISPARAR BOLITAS ¬∑ <span>üí´ POWER-UP CADA 2s</span>
        </div>
    </div>

    <div class="modal" id="victoryModal">
        <div> SISTEMA DESPEJADO </div>
        <div style="font-size: 24px;">Sector de asteroides neutralizado</div>
        <button id="resetBossBtn">SIGUIENTE MISI√ìN</button>
    </div>

    <div class="modal" id="gameOverModal">
        <div> DERRIBADO </div>
        <button id="restartBossBtn">REINTENTAR</button>
    </div>

    <script>
        (function () {
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');

            // Elementos UI
            const levelDisplay = document.getElementById('levelDisplay');
            const scoreDisplay = document.getElementById('scoreDisplay');
            const livesDisplay = document.getElementById('livesDisplay');
            const powerupDisplay = document.getElementById('powerupDisplay');
            const bossWarning = document.getElementById('bossWarning');
            const bossHealthDisplay = document.getElementById('bossHealthDisplay');

            // Modales
            const victoryModal = document.getElementById('victoryModal');
            const gameOverModal = document.getElementById('gameOverModal');

            // Estado del juego
            let gameActive = true;
            let gamePaused = false;
            let score = 0;
            let lives = 3;
            let frame = 0;
            let wave = 1;

            // Nave del jugador
            const player = {
                x: canvas.width / 2,
                y: canvas.height / 2,
                vx: 0,
                vy: 0,
                rotation: -Math.PI / 2,
                radius: 15,
                thrusting: false,
                invulnerable: 0
            };

            // Constantes de f√≠sica
            const ACCELERATION = 0.2;
            const FRICTION = 0.99;
            const ROTATION_SPEED = 0.08;

            // Asteroides
            let asteroids = [];
            const ASTEROID_SPEED = 1.5;

            // Proyectiles - AHORA SON BOLITAS
            let bullets = [];
            const BULLET_SPEED = 10;
            let shotCooldown = 0;
            const BASE_FIRE_RATE = 12;

            // Enemigos (no usados en modo prueba)
            let enemies = [];
            let enemyBullets = [];

            // Power-ups
            let powerups = [];
            const POWERUP_DURATION = 5000;
            const POWERUP_TYPES = ['rapid', 'shield', 'double', 'spread', 'homing'];
            let activePowerup = null;

            // Teclas
            const keys = {
                ArrowLeft: false,
                ArrowRight: false,
                ArrowUp: false,
                ArrowDown: false,
                Space: false
            };

            // Efectos visuales de impacto
            let hitParticles = [];
            let screenShake = 0;

            // --- SISTEMA DE ASTEROIDES ---
            function createAsteroid(x, y, radius, level) {
                const sides = 5 + Math.floor(Math.random() * 5);
                const offset = [];
                for (let i = 0; i < sides; i++) {
                    offset.push(0.8 + Math.random() * 0.4);
                }
                return {
                    x: x || Math.random() * canvas.width,
                    y: y || Math.random() * canvas.height,
                    vx: (Math.random() - 0.5) * ASTEROID_SPEED * (4 - level),
                    vy: (Math.random() - 0.5) * ASTEROID_SPEED * (4 - level),
                    radius: radius || 50,
                    level: level || 3, // 3: Grande, 2: Medio, 1: Peque√±o
                    sides,
                    offset,
                    rotation: Math.random() * Math.PI * 2,
                    rotSpeed: (Math.random() - 0.5) * 0.04
                };
            }

            function spawnWave() {
                for (let i = 0; i < 3 + wave; i++) {
                    // Aparecer lejos del jugador
                    let x, y, dist;
                    do {
                        x = Math.random() * canvas.width;
                        y = Math.random() * canvas.height;
                        const dx = x - player.x;
                        const dy = y - player.y;
                        dist = Math.sqrt(dx * dx + dy * dy);
                    } while (dist < 200);
                    asteroids.push(createAsteroid(x, y, 50, 3));
                }
            }

            // --- C√ÅLCULO DE LA PUNTA ---
            function getShipNose() {
                return {
                    x: player.x + Math.cos(player.rotation) * 22,
                    y: player.y + Math.sin(player.rotation) * 22
                };
            }

            // --- FUNCI√ìN DE ENVOLVIMIENTO (WRAP) ---
            function wrap(obj, margin = 0) {
                if (obj.x < -margin) obj.x = canvas.width + margin;
                else if (obj.x > canvas.width + margin) obj.x = -margin;
                if (obj.y < -margin) obj.y = canvas.height + margin;
                else if (obj.y > canvas.height + margin) obj.y = -margin;
            }

            // --- FUNCI√ìN DE DISPARO ---
            function shoot() {
                if (!gameActive || gamePaused) return;

                const nose = getShipNose();
                const angle = player.rotation;

                bullets.push({
                    x: nose.x,
                    y: nose.y,
                    vx: Math.cos(angle) * BULLET_SPEED + player.vx,
                    vy: Math.sin(angle) * BULLET_SPEED + player.vy,
                    size: 6,
                    age: 0
                });
            }

            function splitAsteroid(i) {
                const a = asteroids[i];
                score += (4 - a.level) * 100;

                // Efecto de impacto
                for (let j = 0; j < 8; j++) {
                    hitParticles.push({
                        x: a.x, y: a.y,
                        vx: (Math.random() - 0.5) * 6,
                        vy: (Math.random() - 0.5) * 6,
                        size: Math.random() * 3 + 1,
                        alpha: 1,
                        color: '#ffffff'
                    });
                }

                if (a.level > 1) {
                    const newRadius = a.radius / 2;
                    asteroids.push(createAsteroid(a.x, a.y, newRadius, a.level - 1));
                    asteroids.push(createAsteroid(a.x, a.y, newRadius, a.level - 1));
                }
                asteroids.splice(i, 1);

                if (asteroids.length === 0) {
                    wave++;
                    spawnWave();
                }
            }

            // --- ACTUALIZACI√ìN PRINCIPAL ---
            function update() {
                if (!gameActive || gamePaused) return;

                // Controles de Rotaci√≥n
                if (keys.ArrowLeft) player.rotation -= ROTATION_SPEED;
                if (keys.ArrowRight) player.rotation += ROTATION_SPEED;

                // Propulsi√≥n (Newtonian)
                player.thrusting = keys.ArrowUp;
                if (player.thrusting) {
                    player.vx += Math.cos(player.rotation) * ACCELERATION;
                    player.vy += Math.sin(player.rotation) * ACCELERATION;
                }

                // Aplicar velocidad y fricci√≥n
                player.x += player.vx;
                player.y += player.vy;
                player.vx *= FRICTION;
                player.vy *= FRICTION;

                // Envolvimiento de pantalla (Wrap)
                wrap(player, 20);

                // Disparo
                if (keys.Space) {
                    if (shotCooldown <= 0) {
                        shoot();
                        shotCooldown = BASE_FIRE_RATE;
                    }
                }
                if (shotCooldown > 0) shotCooldown--;

                // Mover y envolver bolitas
                for (let i = bullets.length - 1; i >= 0; i--) {
                    const b = bullets[i];
                    b.x += b.vx;
                    b.y += b.vy;
                    b.age++;
                    wrap(b, 5);

                    if (b.age > 100) {
                        bullets.splice(i, 1);
                    }
                }

                // Mover y rotar asteroides
                for (let a of asteroids) {
                    a.x += a.vx;
                    a.y += a.vy;
                    a.rotation += a.rotSpeed;
                    wrap(a, a.radius);
                }

                // Colisiones Bolas vs Asteroides
                for (let i = bullets.length - 1; i >= 0; i--) {
                    for (let j = asteroids.length - 1; j >= 0; j--) {
                        const b = bullets[i];
                        const a = asteroids[j];
                        if (!b || !a) continue;

                        const dx = b.x - a.x;
                        const dy = b.y - a.y;
                        const dist = Math.sqrt(dx * dx + dy * dy);

                        if (dist < a.radius) {
                            bullets.splice(i, 1);
                            splitAsteroid(j);
                            break;
                        }
                    }
                }

                // Colisiones Jugador vs Asteroides
                if (player.invulnerable <= 0) {
                    for (let i = 0; i < asteroids.length; i++) {
                        const a = asteroids[i];
                        const dx = player.x - a.x;
                        const dy = player.y - a.y;
                        const dist = Math.sqrt(dx * dx + dy * dy);

                        if (dist < player.radius + a.radius) {
                            lives--;
                            player.invulnerable = 120;
                            screenShake = 20;

                            // Efecto de explosi√≥n
                            for (let j = 0; j < 20; j++) {
                                hitParticles.push({
                                    x: player.x, y: player.y,
                                    vx: (Math.random() - 0.5) * 12,
                                    vy: (Math.random() - 0.5) * 12,
                                    size: Math.random() * 5 + 2,
                                    alpha: 1,
                                    color: '#ff5555'
                                });
                            }

                            if (lives <= 0) {
                                gameActive = false;
                                gameOverModal.style.display = 'flex';
                                return;
                            }
                            break;
                        }
                    }
                }

                // Actualizar part√≠culas de impacto
                for (let i = hitParticles.length - 1; i >= 0; i--) {
                    const p = hitParticles[i];
                    p.x += p.vx;
                    p.y += p.vy;
                    p.alpha -= 0.02;
                    p.vx *= 0.98;
                    p.vy *= 0.98;
                    if (p.alpha <= 0) hitParticles.splice(i, 1);
                }

                if (screenShake > 0) screenShake--;
                if (player.invulnerable > 0) player.invulnerable--;

                frame++;
                updateHUD();
            }

            function updateHUD() {
                levelDisplay.textContent = wave.toString();
                levelDisplay2.textContent = `ALFA-${wave}`;
                asteroidCountDisplay.textContent = `‚òÑÔ∏è OBJETIVOS: ${asteroids.length}`;
                scoreDisplay.textContent = Math.min(score, 999999).toString().padStart(6, '0');
                livesDisplay.textContent = lives;
                powerupDisplay.textContent = 'NE√ìN';
            }

            // --- DIBUJADO NEO-RETR√ì ---
            function draw() {
                ctx.save();
                if (screenShake > 0) {
                    ctx.translate((Math.random() - 0.5) * screenShake, (Math.random() - 0.5) * screenShake);
                }

                ctx.clearRect(-50, -50, canvas.width + 100, canvas.height + 100);

                // Estrellas (Neon points)
                ctx.fillStyle = '#ffffff';
                for (let i = 0; i < 80; i++) {
                    const x = (i * 123) % canvas.width;
                    const y = (i * 456) % canvas.height;
                    ctx.globalAlpha = 0.2 + Math.random() * 0.3;
                    ctx.fillRect(x, y, 2, 2);
                }
                ctx.globalAlpha = 1;

                // --- DIBUJAR NAVE ---
                if (player.invulnerable % 10 < 5) {
                    ctx.save();
                    ctx.translate(player.x, player.y);
                    ctx.rotate(player.rotation);

                    ctx.strokeStyle = '#00f2ff';
                    ctx.lineWidth = 2.5;
                    ctx.shadowColor = '#00f2ff';
                    ctx.shadowBlur = 10;

                    // Forma de A cl√°sica
                    ctx.beginPath();
                    ctx.moveTo(22, 0);
                    ctx.lineTo(-14, 14);
                    ctx.lineTo(-8, 0);
                    ctx.lineTo(-14, -14);
                    ctx.closePath();
                    ctx.stroke();

                    // Propulsor (Fuego ne√≥n)
                    if (player.thrusting) {
                        ctx.strokeStyle = '#ffaa44';
                        ctx.shadowColor = '#ffaa00';
                        ctx.beginPath();
                        ctx.moveTo(-10, 6);
                        ctx.lineTo(-24 - Math.random() * 10, 0);
                        ctx.lineTo(-10, -6);
                        ctx.stroke();
                    }
                    ctx.restore();
                }

                // --- DIBUJAR ASTEROIDES ---
                ctx.strokeStyle = '#ffffff';
                ctx.lineWidth = 2;
                ctx.shadowBlur = 5;
                ctx.shadowColor = '#ffffff';

                for (let a of asteroids) {
                    ctx.save();
                    ctx.translate(a.x, a.y);
                    ctx.rotate(a.rotation);
                    ctx.beginPath();
                    for (let i = 0; i < a.sides; i++) {
                        const ang = (i / a.sides) * Math.PI * 2;
                        const r = a.radius * a.offset[i];
                        const x = Math.cos(ang) * r;
                        const y = Math.sin(ang) * r;
                        if (i === 0) ctx.moveTo(x, y);
                        else ctx.lineTo(x, y);
                    }
                    ctx.closePath();
                    ctx.stroke();
                    ctx.restore();
                }

                // --- DIBUJAR BALAS ---
                ctx.fillStyle = '#ffffff';
                ctx.shadowBlur = 15;
                ctx.shadowColor = '#ffffff';
                for (let b of bullets) {
                    ctx.beginPath();
                    ctx.arc(b.x, b.y, b.size / 2, 0, Math.PI * 2);
                    ctx.fill();
                }

                // --- DIBUJAR PART√çCULAS ---
                for (let i = hitParticles.length - 1; i >= 0; i--) {
                    const p = hitParticles[i];
                    ctx.globalAlpha = p.alpha;
                    ctx.fillStyle = p.color;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fill();
                }
                ctx.globalAlpha = 1;

                ctx.restore();
            }

            // Eventos de teclado
            window.addEventListener('keydown', (e) => {
                if (e.key === ' ') {
                    keys.Space = true;
                    e.preventDefault();
                } else if (e.key.startsWith('Arrow')) {
                    keys[e.key] = true;
                    e.preventDefault();
                }
            });

            window.addEventListener('keyup', (e) => {
                if (e.key === ' ') {
                    keys.Space = false;
                    e.preventDefault();
                } else if (e.key.startsWith('Arrow')) {
                    keys[e.key] = false;
                    e.preventDefault();
                }
            });

            function resetGame() {
                lives = 3;
                score = 0;
                wave = 1;
                asteroids = [];
                bullets = [];
                hitParticles = [];
                player.x = canvas.width / 2;
                player.y = canvas.height / 2;
                player.vx = 0;
                player.vy = 0;
                player.rotation = -Math.PI / 2;
                player.invulnerable = 60;
                gameActive = true;
                gamePaused = false;
                spawnWave();
                victoryModal.style.display = 'none';
                gameOverModal.style.display = 'none';
            }

            // Botones
            document.getElementById('resetBossBtn').addEventListener('click', resetGame);
            document.getElementById('restartBossBtn').addEventListener('click', resetGame);

            // Iniciar
            spawnWave();

            function gameLoop() {
                if (gameActive) {
                    update();
                }
                draw();
                requestAnimationFrame(gameLoop);
            }

            gameLoop();
        })();
    </script>
</body>

</html>